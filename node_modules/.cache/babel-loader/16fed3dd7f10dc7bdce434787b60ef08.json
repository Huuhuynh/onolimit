{"ast":null,"code":"import { isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { iterateArrayOrObject, isActionPrevent } from '../base/util';\nimport * as events from '../base/constant';\n/**\n * The `ShowHide` module is used to control column visibility.\n */\n\nvar ShowHide =\n/** @class */\nfunction () {\n  /**\n   * Constructor for the show hide module.\n   * @hidden\n   */\n  function ShowHide(parent) {\n    this.parent = parent;\n  }\n  /**\n   * Shows a column by column name.\n   * @param  {string|string[]} columnName - Defines a single or collection of column names to show.\n   * @param  {string} showBy - Defines the column key either as field name or header text.\n   * @return {void}\n   */\n\n\n  ShowHide.prototype.show = function (columnName, showBy) {\n    var keys = this.getToggleFields(columnName);\n    var columns = this.getColumns(keys, showBy);\n    this.parent.notify(events.tooltipDestroy, {\n      module: 'edit'\n    });\n    columns.forEach(function (value) {\n      value.visible = true;\n    });\n    this.setVisible(columns);\n  };\n  /**\n   * Hides a column by column name.\n   * @param  {string|string[]} columnName - Defines a single or collection of column names to hide.\n   * @param  {string} hideBy - Defines the column key either as field name or header text.\n   * @return {void}\n   */\n\n\n  ShowHide.prototype.hide = function (columnName, hideBy) {\n    var keys = this.getToggleFields(columnName);\n    var columns = this.getColumns(keys, hideBy);\n    this.parent.notify(events.tooltipDestroy, {\n      module: 'edit'\n    });\n    columns.forEach(function (value) {\n      value.visible = false;\n    });\n    this.setVisible(columns);\n  };\n\n  ShowHide.prototype.getToggleFields = function (key) {\n    var finalized = [];\n\n    if (typeof key === 'string') {\n      finalized = [key];\n    } else {\n      finalized = key;\n    }\n\n    return finalized;\n  };\n\n  ShowHide.prototype.getColumns = function (keys, getKeyBy) {\n    var _this = this;\n\n    var columns = iterateArrayOrObject(keys, function (key, index) {\n      return iterateArrayOrObject(_this.parent.columnModel, function (item, index) {\n        if (item[getKeyBy] === key) {\n          return item;\n        }\n\n        return undefined;\n      })[0];\n    });\n    return columns;\n  };\n  /**\n   * Shows or hides columns by given column collection.\n   * @private\n   * @param  {Column[]} columns - Specifies the columns.\n   * @return {void}\n   */\n\n\n  ShowHide.prototype.setVisible = function (columns) {\n    if (isActionPrevent(this.parent)) {\n      this.parent.notify(events.preventBatch, {\n        instance: this,\n        handler: this.setVisible,\n        arg1: columns\n      });\n      return;\n    }\n\n    var currentViewCols = this.parent.getColumns();\n    columns = isNullOrUndefined(columns) ? currentViewCols : columns;\n\n    if (this.parent.allowSelection && this.parent.getSelectedRecords().length) {\n      this.parent.clearSelection();\n    }\n\n    if (this.parent.enableColumnVirtualization) {\n      var colsInCurrentView = columns.filter(function (col1) {\n        return currentViewCols.some(function (col2) {\n          return col1.field === col2.field;\n        });\n      });\n\n      if (colsInCurrentView.length) {\n        this.parent.notify(events.columnVisibilityChanged, columns);\n      }\n    } else {\n      this.parent.notify(events.columnVisibilityChanged, columns);\n    }\n\n    if (this.parent.columnQueryMode !== 'All') {\n      this.parent.refresh();\n    }\n  };\n\n  return ShowHide;\n}();\n\nexport { ShowHide };","map":null,"metadata":{},"sourceType":"module"}